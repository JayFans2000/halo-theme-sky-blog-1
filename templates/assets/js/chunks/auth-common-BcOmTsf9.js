document.querySelectorAll(".toggle-password-button").forEach(function(e){e.addEventListener("click",function(){const s=this.closest(".toggle-password-display-flag"),t=s.querySelector("input"),n=s.dataset.show==="true";s.dataset.show=n?"false":"true",t.type=n?"password":"text"})});window.setupPasswordConfirmation=function(e,s){const t=document.getElementById(e),n=document.getElementById(s);if(!t||!n)return;function i(){const o=t.value!==n.value?window.i18nResources?.passwordConfirmationFailed||"密码不一致":"";n.setCustomValidity(o)}t.addEventListener("input",i),n.addEventListener("input",i)};window.sendVerificationCode=function(e,s){let t=60;const n=e.textContent;e.addEventListener("click",async function(){if(!e.disabled){e.disabled=!0,e.textContent="发送中...";try{await s();const i=setInterval(function(){t--,e.textContent=t+"s",t<=0&&(clearInterval(i),e.textContent=n,e.disabled=!1,t=60)},1e3)}catch(i){e.textContent=n,e.disabled=!1,alert(i.message||"发送失败")}}})};
