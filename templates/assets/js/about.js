import"./chunks/article-content-CjRqbsg3.js";(function(v,l){const c={};c.initScrollReveal=function(){const t=l.querySelectorAll("[data-reveal]");if(!t.length)return;const e=new IntersectionObserver(function(a){a.forEach(function(o){o.isIntersecting&&o.target.classList.add("revealed")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});t.forEach(function(a){e.observe(a)})},c.initStatCounter=function(){const t=l.querySelectorAll("[data-stat-value]");if(!t.length)return;const e=new IntersectionObserver(function(a){a.forEach(function(o){o.isIntersecting&&!o.target.classList.contains("counted")&&(o.target.classList.add("counted"),c.animateNumber(o.target))})},{threshold:.3,rootMargin:"0px 0px -20px 0px"});t.forEach(function(a){e.observe(a)})},c.easeOutQuart=function(t){return 1-Math.pow(1-t,4)},c.animateNumber=function(t){const e=parseInt(t.getAttribute("data-target"))||0,a=t.querySelector(".sf-stat-number");if(!a)return;const o=1800,r=performance.now();function n(u){return u>=1e4?u.toLocaleString("zh-CN"):u.toString()}function i(u){const h=u-r,m=Math.min(h/o,1),d=c.easeOutQuart(m),M=Math.floor(d*e);a.textContent=n(M),m<1?requestAnimationFrame(i):a.textContent=n(e)}requestAnimationFrame(i)},c.initArticleHeatmap=function(){const t=l.getElementById("article-heatmap-container");if(!t||!v.aboutPagePosts)return;const e=v.aboutPagePosts.filter(function(s){return s.title&&s.date});if(!e.length)return;const a=t.querySelector(".heatmap-canvas"),o=l.getElementById("article-count");o&&(o.textContent=e.length);const r={};e.forEach(function(s){const g=new Date(s.date),p=g.getFullYear()+"-"+String(g.getMonth()+1).padStart(2,"0")+"-"+String(g.getDate()).padStart(2,"0");r[p]||(r[p]=[]),r[p].push(s)});const n=11,i=3,u=53,h=7,m=25,d=15,M=m+u*(n+i)+i,H=d+h*(n+i)+i,k=new Date,f=new Date(k);f.setDate(f.getDate()-364);const y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B=[];let q=-1;for(let s=0;s<u;s++){const g=new Date(f);g.setDate(g.getDate()+s*7);const p=g.getMonth();p!==q&&(B.push('<text x="'+(m+s*(n+i))+'" y="10" class="heatmap-month-label">'+y[p]+"</text>"),q=p)}const N=["","Mon","","Wed","","Fri",""],W=[1,3,5].map(function(s){return'<text x="0" y="'+(d+s*(n+i)+n*.75)+'" class="heatmap-label">'+N[s]+"</text>"}),O=[],P=Math.max.apply(null,Object.values(r).map(function(s){return s.length}).concat([1]));for(let s=0;s<u*h;s++){const g=Math.floor(s/h),p=s%h,S=new Date(f);if(S.setDate(S.getDate()+g*7+p),S>k)continue;const E=S.getFullYear()+"-"+String(S.getMonth()+1).padStart(2,"0")+"-"+String(S.getDate()).padStart(2,"0"),D=r[E]?r[E].length:0,I=D===0?0:Math.ceil(D/P*3);let b;I===0?b="color-mix(in oklch, var(--color-base-content) 15%, var(--color-base-100))":I===1?b="color-mix(in oklch, var(--color-primary) 40%, var(--color-base-100))":I===2?b="color-mix(in oklch, var(--color-primary) 70%, var(--color-base-100))":b="var(--color-primary)",O.push('<rect x="'+(m+g*(n+i))+'" y="'+(d+p*(n+i))+'" width="'+n+'" height="'+n+'" rx="2" fill="'+b+'" class="article-heatmap-cell heatmap-cell-animated" style="animation-delay:'+s+'ms" data-date="'+E+'" data-count="'+D+'"></rect>')}a.innerHTML='<svg class="article-heatmap-svg" viewBox="0 0 '+M+" "+H+'"><g>'+B.join("")+"</g><g>"+W.join("")+"</g><g>"+O.join("")+"</g></svg>";const x=l.getElementById("article-tooltip");a.querySelectorAll(".article-heatmap-cell").forEach(function(s){s.addEventListener("mouseenter",function(g){if(!x)return;const p=s.getAttribute("data-date"),S=s.getAttribute("data-count"),E=new Date(p),D=E.getFullYear()+"/"+(E.getMonth()+1)+"/"+E.getDate(),I=e.filter(function(L){return new Date(L.date).toDateString()===E.toDateString()});let b='<div class="heatmap-tooltip-date">'+D+'</div><div class="heatmap-tooltip-count">'+S+" 篇文章</div>";I.length>0&&(b+='<div class="heatmap-tooltip-posts">',I.slice(0,3).forEach(function(L){b+='<span class="heatmap-tooltip-post">'+L.title+"</span>"}),I.length>3&&(b+='<span class="heatmap-tooltip-post">+'+(I.length-3)+" 更多...</span>"),b+="</div>"),x.innerHTML=b,x.style.display="block";var T=x.offsetWidth||200,F=x.offsetHeight||100,V=v.innerWidth,j=v.innerHeight,_=v.scrollX||v.pageXOffset,z=v.scrollY||v.pageYOffset,w=g.pageX+10,A=g.pageY+10;w+T>_+V-20&&(w=g.pageX-T-10),A+F>z+j-20&&(A=g.pageY-F-10),w<_+10&&(w=_+10),x.style.left=w+"px",x.style.top=A+"px"}),s.addEventListener("mouseleave",function(){x&&(x.style.display="none")})})};function C(t,e){if(!t)return e;const a=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(a)return[a[1],a[2],a[3]].map(function(i){return parseInt(i).toString(16).padStart(2,"0")}).join("");try{var o=l.createElement("canvas");o.width=o.height=1;var r=o.getContext("2d");r.fillStyle=t,r.fillRect(0,0,1,1);var n=r.getImageData(0,0,1,1).data;return[n[0],n[1],n[2]].map(function(i){return i.toString(16).padStart(2,"0")}).join("")}catch(i){return console.log("[GitHub] colorToHex error:",i),e}}c.updateGitHubColors=function(){const t=v.aboutGithubConfig;if(!t||!t.username)return;var e=t.theme?String(t.theme).trim():"",a=e&&e!=="null"&&e!=="undefined";if(a)return;const o=l.getElementById("about-color-probe");let r="1f2937",n="6b7280";o&&(r=C(getComputedStyle(o).backgroundColor,r),n=C(getComputedStyle(o).color,n));var i=t.locale?String(t.locale).trim():"",u=i&&i!=="null"&&i!=="undefined"?"&locale="+i:"";const h=l.querySelector(".github-heatmap-img");h&&(h.src="https://ghchart.rshah.org/"+r+"/"+t.username);const m=l.getElementById("github-stats-img");m&&(m.src=t.statsHost+"/api?username="+t.username+"&show_icons=true&hide_border=true"+u+"&theme=transparent&title_color="+r+"&icon_color="+r+"&text_color="+n+"&bg_color=00000000");const d=l.getElementById("github-langs-img");d&&(d.src=t.statsHost+"/api/top-langs/?username="+t.username+"&layout=compact&hide_border=true"+u+"&theme=transparent&title_color="+r+"&text_color="+n+"&bg_color=00000000")},c.initGitHub=function(){const t=l.getElementById("github-heatmap-container"),e=v.aboutGithubConfig;if(!e||!e.username)return;const a=l.getElementById("about-color-probe");let o="1f2937",r="6b7280";if(a&&(o=C(getComputedStyle(a).backgroundColor,o),r=C(getComputedStyle(a).color,r)),t){const f=t.querySelector(".github-heatmap-img"),y=t.querySelector(".sf-loading");f&&(f.onload=function(){f.style.display="block",y&&(y.style.display="none")},f.onerror=function(){y&&(y.innerHTML='<span style="opacity:0.6;">加载失败</span>')},f.src="https://ghchart.rshah.org/"+o+"/"+e.username)}var n=e.locale?String(e.locale).trim():"",i=n&&n!=="null"&&n!=="undefined"?"&locale="+n:"",u=e.theme?String(e.theme).trim():"",h=u&&u!=="null"&&u!=="undefined";const m=l.getElementById("github-stats-img"),d=l.getElementById("github-langs-img");if(m){var M=e.statsHost+"/api?username="+e.username+"&show_icons=true&hide_border=true"+i;h?M+="&theme="+u:M+="&theme=transparent&title_color="+o+"&icon_color="+o+"&text_color="+r+"&bg_color=00000000",m.src=M}if(d){var H=e.statsHost+"/api/top-langs/?username="+e.username+"&layout=compact&hide_border=true"+i;h?H+="&theme="+u:H+="&theme=transparent&title_color="+o+"&text_color="+r+"&bg_color=00000000",d.src=H}var k=new MutationObserver(function(f){f.forEach(function(y){(y.attributeName==="data-theme"||y.attributeName==="data-color-scheme")&&requestAnimationFrame(function(){c.updateGitHubColors()})})});k.observe(l.documentElement,{attributes:!0,attributeFilter:["data-theme","data-color-scheme"]})},c.initLocation=function(){const t=l.getElementById("location-map");if(!t)return;const e=parseFloat(t.getAttribute("data-lat")),a=parseFloat(t.getAttribute("data-lng")),o=t.getAttribute("data-name")||"位置";if(isNaN(e)||isNaN(a)){t.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100%;opacity:0.5;">请配置位置坐标</div>';return}const r=13,n=Math.min(800,t.offsetWidth||800),i=320,u="https://apis.map.qq.com/ws/staticmap/v2/?center="+e+","+a+"&zoom="+r+"&size="+n+"*"+i+"&markers=color:red|label:A|"+e+","+a+"&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77",h=encodeURIComponent(o),m="https://uri.amap.com/marker?position="+a+","+e+"&name="+h+"&coordinate=gaode&callnative=1";t.innerHTML='<a href="'+m+'" target="_blank" rel="noopener" style="display:block;position:relative;width:100%;height:100%;min-height:'+i+'px;border-radius:0.75rem;overflow:hidden;cursor:pointer;transition:all 0.3s ease;"><img src="'+u+'" alt="地图位置" style="width:100%;height:100%;object-fit:cover;" loading="lazy" /><div style="position:absolute;bottom:1rem;right:1rem;display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;background:var(--color-base-content);color:var(--color-base-100);border-radius:2rem;font-size:0.875rem;font-weight:600;box-shadow:0 4px 12px rgba(0,0,0,0.25);"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>在地图中查看</div></a>'},c.initToolkitProgress=function(){const t=l.querySelectorAll(".sf-tool-progress");if(!t.length)return;const e=new IntersectionObserver(function(a){a.forEach(function(o){if(o.isIntersecting&&!o.target.classList.contains("animated")){o.target.classList.add("animated");const r=o.target.style.width;o.target.style.width="0",setTimeout(function(){o.target.style.width=r},100)}})},{threshold:.5});t.forEach(function(a){e.observe(a)})},c.initSmoothScroll=function(){l.querySelectorAll('a[href^="#"]').forEach(function(t){t.addEventListener("click",function(e){const a=this.getAttribute("href");if(a==="#")return;const o=l.querySelector(a);o&&(e.preventDefault(),o.scrollIntoView({behavior:"smooth",block:"start"}))})})},l.addEventListener("DOMContentLoaded",function(){c.initScrollReveal(),c.initStatCounter(),c.initArticleHeatmap(),c.initGitHub(),c.initToolkitProgress(),c.initSmoothScroll(),setTimeout(c.initLocation,500)})})(window,document);
