console.log("Sky Theme - 首页脚本已加载"),window.handleMomentCardGlow=function(t,e){const n=e.querySelector(".moment-glow");if(!n)return;const o=e.getBoundingClientRect(),i=t.clientX-o.left,s=t.clientY-o.top;n.style.left=i+"px",n.style.top=s+"px"},window.showMomentCardGlow=function(t){const e=t.querySelector(".moment-glow");e&&(e.style.opacity="1")},window.hideMomentCardGlow=function(t){const e=t.querySelector(".moment-glow");e&&(e.style.opacity="0")},function(){const t="sky-theme-liked-moments";function e(){try{const e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch{return[]}}window.upvoteMoment=async function(n){const o=n.getAttribute("data-moment-name");if(!o||function(t){return e().includes(t)}(o))return;const i=n.querySelector("span"),s=n.parentElement.querySelector(".text-xs.text-gray-400"),l=parseInt(s.textContent)||0;try{(await fetch("/apis/api.halo.run/v1alpha1/trackers/upvote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group:"moment.halo.run",kind:"Moment",name:o,plural:"moments"})})).ok&&(!function(n){try{const o=e();o.includes(n)||(o.push(n),localStorage.setItem(t,JSON.stringify(o)))}catch(o){console.error("保存点赞状态失败:",o)}}(o),i.className="icon-[material-symbols--favorite] w-3.5 h-3.5 text-red-400",s.textContent=l+1,n.disabled=!0)}catch(a){console.error("点赞失败:",a)}},document.addEventListener("DOMContentLoaded",function(){e().forEach(t=>{const e=document.querySelector(`[data-moment-name="${t}"]`);if(e){const t=e.querySelector("span");t&&(t.className="icon-[material-symbols--favorite] w-3.5 h-3.5 text-red-400",e.disabled=!0)}})})}(),function(){const t={titleElement:null,decorationEffect:"none",styleEffect:"none",originalText:"",init(){this.titleElement=document.getElementById("main-title"),this.titleElement?(this.decorationEffect=this.titleElement.dataset.decorationEffect||"none",this.styleEffect=this.titleElement.dataset.styleEffect||"none",this.originalText=this.titleElement.dataset.originalText||this.titleElement.textContent.trim(),console.log("标题特效配置:",{decoration:this.decorationEffect,style:this.styleEffect,text:this.originalText}),this.applyEffects()):console.warn("未找到标题元素 #main-title")},applyEffects(){this.applyDecorationEffect(),this.applyStyleEffect()},applyDecorationEffect(){"none"!==this.decorationEffect&&("effect-particles"!==this.decorationEffect&&"effect-starlight"!==this.decorationEffect||(this.titleElement.innerHTML=`<span><span><span>${this.originalText}</span></span></span>`),this.titleElement.classList.add(this.decorationEffect),"effect-neon-edge"===this.decorationEffect&&this.titleElement.setAttribute("data-text",this.originalText))},applyStyleEffect(){"none"!==this.styleEffect&&(this.titleElement.classList.add(this.styleEffect),"effect-marker-pop"!==this.styleEffect&&"effect-diagonal-split"!==this.styleEffect||this.titleElement.setAttribute("data-text",this.originalText))}};document.addEventListener("DOMContentLoaded",()=>{t.init()})}();
